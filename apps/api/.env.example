# ===========================================
# Komuchi API â€” Environment Variables
# ===========================================
#
# Copy this file to .env and fill in the values:
#   cp .env.example .env
#
# ===========================================

# ---- Database ----
# Local dev (PostgreSQL in Docker): postgresql://postgres:postgres@localhost:5432/komuchi
# Production (e.g. Railway): set by platform
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/komuchi"

# ---- API Configuration ----
API_PORT=3001
API_HOST=0.0.0.0
CORS_ORIGIN=http://localhost:3000,http://localhost:5174
NODE_ENV=development

# ---- Redis (for BullMQ job queue) ----
REDIS_URL="redis://localhost:6379"

# ---- S3-compatible Storage (MinIO) ----
S3_BUCKET=komuchi
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
S3_ENDPOINT=http://localhost:9000

# ---- AI Providers ----
# Options for TRANSCRIPTION_PROVIDER: openai, deepgram, mock
TRANSCRIPTION_PROVIDER=openai
# Options for DEBRIEF_PROVIDER: openai, mock
DEBRIEF_PROVIDER=openai

# Your OpenAI API key (required for transcription + debrief)
# Get one at https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-key-here

# Optional: Deepgram API key (only if TRANSCRIPTION_PROVIDER=deepgram)
# DEEPGRAM_API_KEY=

# ---- Rate Limiting ----
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# ---- Upload Limits ----
MAX_UPLOAD_SIZE_MB=500

# ---- Diarization Service ----
# URL of the Python diarization service (started via Docker or manually)
DIARIZATION_SERVICE_URL=http://localhost:8001

# ---- Firebase Auth (optional) ----
# Set these to enable Firebase Authentication.
# Without them, the API falls back to x-user-id header (dev mode).
# FIREBASE_PROJECT_ID=your-firebase-project-id
# FIREBASE_SERVICE_ACCOUNT_JSON=  # paste the full JSON string here (optional, for prod)
